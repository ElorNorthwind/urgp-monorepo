DROP TABLE IF EXISTS data_mos.address_registry CASCADE;
CREATE TABLE data_mos.address_registry (
    global_id BIGINT PRIMARY KEY,
    on_territory_of_moscow BOOLEAN NULL DEFAULT true,
    unom INTEGER,
    address TEXT,
    simple_address TEXT,
    adm_area VARCHAR(255),
    district VARCHAR(255),
    nreg BIGINT,
    dreg DATE,
    n_fias TEXT,
    d_fias DATE,
    kladr VARCHAR(20),
    tdoc VARCHAR(255),
    ndoc VARCHAR(50),
    ddoc DATE,
    obj_type VARCHAR(255),
    adr_type VARCHAR(255),
    vid VARCHAR(255),
    sostad VARCHAR(255),
    status VARCHAR(255),
    kad_n TEXT[],
    kad_zu TEXT[],
    geo_data GEOMETRY,
    p0 VARCHAR(255),
    p1 VARCHAR(255),
    p2 VARCHAR(255),
    p3 VARCHAR(255),
    p4 VARCHAR(255),
    p5 VARCHAR(255),
    p6 VARCHAR(255),
    p7 VARCHAR(255),
    p90 VARCHAR(255),
    p91 VARCHAR(255),
    l1_type VARCHAR(255),
    l1_value VARCHAR(255),
    l2_type VARCHAR(255),
    l2_value VARCHAR(255),
    l3_type VARCHAR(255),
    l3_value VARCHAR(255),
    l4_type VARCHAR(255),
    l4_value VARCHAR(255),
    l5_type VARCHAR(255),
    l5_value VARCHAR(255),
    center_point GEOMETRY GENERATED ALWAYS AS (ST_PointOnSurface(geo_data)) STORED,
    updated_at TIMESTAMP WITHOUT TIME ZONE DEFAULT (now())::timestamp(0) with time zone
);

DROP TABLE IF EXISTS data_mos.transport_stations CASCADE;
CREATE TABLE data_mos.transport_stations (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name TEXT,
    on_territory_of_moscow BOOLEAN NOT NULL DEFAULT true,
    adm_area VARCHAR(255),
    district VARCHAR(255),
    vestibule_type VARCHAR(255),
    name_of_station TEXT,
    line TEXT,
    cultural_heritage_site_status VARCHAR(255),
    object_status VARCHAR(255),
    geo_data GEOMETRY,
    station_type VARCHAR(50) NOT NULL DEFAULT 'metro',
    updated_at TIMESTAMP WITHOUT TIME ZONE DEFAULT (now())::timestamp(0) with time zone
);